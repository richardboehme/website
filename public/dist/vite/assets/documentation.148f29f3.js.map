{"version":3,"file":"documentation.148f29f3.js","sources":["../../../node_modules/fzy.js/index.js","../../../app/frontend/js/fzySearch.js","../../../app/frontend/js/initSearchModal.js","../../../app/frontend/entrypoints/documentation.js"],"sourcesContent":["var SCORE_MIN = -Infinity;\nvar SCORE_MAX = Infinity;\n\nvar SCORE_GAP_LEADING = -0.005\nvar SCORE_GAP_TRAILING = -0.005\nvar SCORE_GAP_INNER = -0.01\nvar SCORE_MATCH_CONSECUTIVE = 1.0\nvar SCORE_MATCH_SLASH = 0.9\nvar SCORE_MATCH_WORD = 0.8\nvar SCORE_MATCH_CAPITAL = 0.7\nvar SCORE_MATCH_DOT = 0.6\n\nfunction islower(s) {\n\treturn s.toLowerCase() === s;\n}\n\nfunction isupper(s) {\n\treturn s.toUpperCase() === s;\n}\n\nfunction precompute_bonus(haystack) {\n\t/* Which positions are beginning of words */\n\tvar m = haystack.length;\n\tvar match_bonus = new Array(m);\n\n\tvar last_ch = '/';\n\tfor (var i = 0; i < m; i++) {\n\t\tvar ch = haystack[i];\n\n\t\tif (last_ch === '/') {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_SLASH;\n\t\t} else if (last_ch === '-' || last_ch === '_' || last_ch === ' ') {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_WORD;\n\t\t} else if (last_ch === '.') {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_DOT;\n\t\t} else if (islower(last_ch) && isupper(ch)) {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_CAPITAL;\n\t\t} else {\n\t\t\tmatch_bonus[i] = 0;\n\t\t}\n\n\t\tlast_ch = ch;\n\t}\n\n\treturn match_bonus;\n}\n\nfunction compute(needle, haystack, D, M) {\n\tvar n = needle.length;\n\tvar m = haystack.length;\n\n\tvar lower_needle = needle.toLowerCase();\n\tvar lower_haystack = haystack.toLowerCase();\n\n\tvar match_bonus = precompute_bonus(haystack, match_bonus);\n\n\t/*\n\t * D[][] Stores the best score for this position ending with a match.\n\t * M[][] Stores the best possible score at this position.\n\t */\n\n\tfor (var i = 0; i < n; i++) {\n\t\tD[i] = new Array(m);\n\t\tM[i] = new Array(m);\n\n\t\tvar prev_score = SCORE_MIN;\n\t\tvar gap_score = i === n - 1 ? SCORE_GAP_TRAILING : SCORE_GAP_INNER;\n\n\t\tfor (var j = 0; j < m; j++) {\n\t\t\tif (lower_needle[i] === lower_haystack[j]) {\n\t\t\t\tvar score = SCORE_MIN;\n\t\t\t\tif (!i) {\n\t\t\t\t\tscore = (j * SCORE_GAP_LEADING) + match_bonus[j];\n\t\t\t\t} else if (j) { /* i > 0 && j > 0*/\n\t\t\t\t\tscore = Math.max(\n\t\t\t\t\t\tM[i - 1][j - 1] + match_bonus[j],\n\n\t\t\t\t\t\t/* consecutive match, doesn't stack with match_bonus */\n\t\t\t\t\t\tD[i - 1][j - 1] + SCORE_MATCH_CONSECUTIVE);\n\t\t\t\t}\n\t\t\t\tD[i][j] = score;\n\t\t\t\tM[i][j] = prev_score = Math.max(score, prev_score + gap_score);\n\t\t\t} else {\n\t\t\t\tD[i][j] = SCORE_MIN;\n\t\t\t\tM[i][j] = prev_score = prev_score + gap_score;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction score(needle, haystack) {\n\tvar n = needle.length;\n\tvar m = haystack.length;\n\n\tif (!n || !m)\n\t\treturn SCORE_MIN;\n\n\tif (n === m) {\n\t\t/* Since this method can only be called with a haystack which\n\t\t * matches needle. If the lengths of the strings are equal the\n\t\t * strings themselves must also be equal (ignoring case).\n\t\t */\n\t\treturn SCORE_MAX;\n\t}\n\n\tif (m > 1024) {\n\t\t/*\n\t\t * Unreasonably large candidate: return no score\n\t\t * If it is a valid match it will still be returned, it will\n\t\t * just be ranked below any reasonably sized candidates\n\t\t */\n\t\treturn SCORE_MIN;\n\t}\n\n\tvar D = new Array(n);\n\tvar M = new Array(n);\n\n\tcompute(needle, haystack, D, M)\n\n\treturn M[n - 1][m - 1];\n}\n\nfunction positions(needle, haystack) {\n\tvar n = needle.length;\n\tvar m = haystack.length;\n\n\tvar positions = new Array(n);\n\n\tif (!n || !m)\n\t\treturn positions;\n\n\tif (n === m) {\n\t\tfor (var i = 0; i < n; i++)\n\t\t\tpositions[i] = i;\n\t\treturn positions;\n\t}\n\n\tif (m > 1024) {\n\t\treturn positions;\n\t}\n\n\tvar D = new Array(n);\n\tvar M = new Array(n);\n\n\tcompute(needle, haystack, D, M)\n\n\t/* backtrack to find the positions of optimal matching */\n\tvar match_required = false;\n\n\tfor (var i = n - 1, j = m - 1; i >= 0; i--) {\n\t\tfor (; j >= 0; j--) {\n\t\t\t/*\n\t\t\t * There may be multiple paths which result in\n\t\t\t * the optimal weight.\n\t\t\t *\n\t\t\t * For simplicity, we will pick the first one\n\t\t\t * we encounter, the latest in the candidate\n\t\t\t * string.\n\t\t\t */\n\t\t\tif (D[i][j] !== SCORE_MIN &&\n\t\t\t    (match_required || D[i][j] === M[i][j])) {\n\t\t\t\t/* If this score was determined using\n\t\t\t\t * SCORE_MATCH_CONSECUTIVE, the\n\t\t\t\t * previous character MUST be a match\n\t\t\t\t */\n\t\t\t\tmatch_required =\n\t\t\t\t    i && j &&\n\t\t\t\t    M[i][j] === D[i - 1][j - 1] + SCORE_MATCH_CONSECUTIVE;\n\t\t\t\tpositions[i] = j--;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn positions;\n}\n\nfunction hasMatch(needle, haystack) {\n  needle = needle.toLowerCase()\n  haystack = haystack.toLowerCase()\n  var l = needle.length\n  for (var i = 0, j = 0; i < l; i += 1) {\n    j = haystack.indexOf(needle[i], j) + 1\n    if (j === 0) return false\n  }\n  return true\n}\n\nexport {\n\t/* constants */\n\tSCORE_MIN,\n\tSCORE_MAX,\n\n\tSCORE_GAP_LEADING,\n\tSCORE_GAP_TRAILING,\n\tSCORE_GAP_INNER,\n\tSCORE_MATCH_CONSECUTIVE,\n\tSCORE_MATCH_SLASH,\n\tSCORE_MATCH_WORD,\n\tSCORE_MATCH_CAPITAL,\n\tSCORE_MATCH_DOT,\n\n\t/* functions */\n\tscore,\n\tpositions,\n\thasMatch\n}\n","import jquery from \"jquery\";\nimport { score } from \"fzy.js\";\n\nconst getMatches = function (query) {\n  if (!query) return;\n\n  var regex = new RegExp(query.split(\"\").join(\".*\"));\n  var filteredList = searchMap.filter(function (item) {\n    return item.pattern.match(regex);\n  });\n\n  // Sort matched sectons in DESC order and keep only top five\n  return filteredList\n    .sort(function (second, first) {\n      return score(query, first.pattern) - score(query, second.pattern);\n    })\n    .slice(0, 5);\n};\n\nconst fragmentsFor = function (matches) {\n  // Create empty fragment to generate list DOM and avoid multiple DOM insertions\n  var searchesFragment = jquery(document.createDocumentFragment());\n  matches.forEach(function (item) {\n    var breadcrumbs = item.breadcrumbs.map(function (breadcrumb) {\n      return jquery(\n        '<li class=\"breadcrumb-item\"><a href=\"' +\n          breadcrumb.link +\n          '\">' +\n          breadcrumb.title +\n          \"</a></li>\"\n      );\n    });\n\n    searchesFragment.append(\n      jquery('<ol class=\"breadcrumb\"></ol>').append(breadcrumbs)\n    );\n  });\n\n  return searchesFragment;\n};\n\nexport { getMatches, fragmentsFor };\n","import jquery from \"jquery\";\nimport { getMatches, fragmentsFor } from \"./fzySearch\";\n\njquery(document).ready(function () {\n  var searchModal = jquery(\"#searchModal\");\n  var searchInput = searchModal.find(\"input.search-input\");\n\n  jquery(document).on(\"keypress\", function (e) {\n    if (e.which === 47) {\n      e.preventDefault();\n      searchModal.modal(\"show\"); // Opening search on typing `/`\n    }\n  });\n\n  searchModal.on(\"show.bs.modal\", function (e) {\n    searchModal.find(\".modal-body\").remove(); // Clear previous search results\n  });\n\n  searchModal.on(\"shown.bs.modal\", function (e) {\n    searchInput.focus();\n  });\n\n  searchModal.on(\"hidden.bs.modal\", function () {\n    searchInput.val(\"\"); // Clear search query\n  });\n\n  // Hack to blur out searchInput so that breadcrumb links can be clicked\n  searchModal.on(\"mouseover\", \"li.breadcrumb-item > a\", function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (searchInput.is(\":focus\")) searchInput.blur();\n  });\n\n  searchModal.on(\"click\", \"li.breadcrumb-item > a\", function () {\n    searchModal.modal(\"hide\");\n  });\n\n  searchModal.on(\n    \"change keyup paste\",\n    \".search-header .search-input\",\n    function (e) {\n      searchModal.find(\".modal-body\").remove(); // Clear previous search results on each query change\n\n      var matches = getMatches(e.target.value);\n      var searchesFragment = fragmentsFor(matches);\n\n      // Insert fragment into DOM at once\n      searchModal\n        .find(\".modal-content\")\n        .append(\n          jquery('<div class=\"modal-body\"></div>').append(searchesFragment)\n        );\n    }\n  );\n});\n","import jquery from \"jquery\";\n\n// Import highlight.js and specific languages\nimport hljs from \"highlight.js/lib/core\";\nimport ruby from \"highlight.js/lib/languages/ruby\";\nimport xml from \"highlight.js/lib/languages/xml\";\nimport json from \"highlight.js/lib/languages/json\";\nimport \"highlight.js/styles/default.css\";\n\nimport \"bootstrap/dist/js/bootstrap.min.js\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport \"~/css/material.css\";\nimport \"~/css/tomorrow-night-blue.css\";\nimport \"~/css/font-awesome.css\";\nimport \"~/css/main.css\";\n\nimport \"~/js/initAnchor.js\";\nimport \"~/js/initSearchModal.js\";\n\nfunction updateRightSidebarScrollspy() {\n  var href = jquery(\".nav-item .active\").attr(\"href\");\n  var chapter = href;\n  var feature = chapter + \"-features\";\n  jquery(\".features\").hide();\n  jquery(feature).show();\n  history.replaceState({}, \"\", href);\n}\n\njquery(document).ready(function () {\n  jquery('a.nav-link[data-toggle=\"tab\"]').click(function (e) {\n    const navContent = jquery(e.target.dataset.tag);\n    navContent.siblings().removeClass(\"active\");\n    navContent.addClass(\"active\");\n  });\n\n  hljs.registerLanguage(\"ruby\", ruby);\n  hljs.registerLanguage(\"xml\", xml);\n  hljs.registerLanguage(\"json\", json);\n  hljs.highlightAll();\n\n  jquery(window).scrollspy({ target: \".nav.menu\", offset: 110 });\n  updateRightSidebarScrollspy();\n\n  jquery(window).on(\"activate.bs.scrollspy\", updateRightSidebarScrollspy);\n});\n"],"names":["hljs"],"mappings":"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"}